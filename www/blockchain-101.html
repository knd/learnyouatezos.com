<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Learn You a Tezos for Much Prosperity</title>
  <link rel="shortcut icon" href="/static/img/blkstar.co.logo_128.bt.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="description" content="...">
  <meta name="author" content="Matthew Smith">
  <title>Latte, Jed?</title>
  <link rel="stylesheet" href="/static/css/github.css?v=1.0">
  <link rel="stylesheet" href="/static/css/typeset.css?v=1.0">
  <link rel="stylesheet" href="/static/css/styles.css?v=1.0">
</head>
<body class="typeset">
  <div id="background">
    <div id="content">

<h1>Blockchain 101</h1>

<div class="navigation">
  <ul>
    <li style="text-align: left">
      
        <a id="prevlink" href="/introduction-what-is-tezos.html">Introduction: What is Tezos?</a>
      
    </li>
    <li style="text-align: center">
      <a href="/toc.html">Table of Contents</a>
    </li>
    <li style="text-align: right">
      
        <a id="nextlink" href="/blockchain-201.html">Blockchain 201</a>
      
    </li>
  </ul>
</div>

<h3 id="the-foundations-of-blockchain">The Foundations of Blockchain</h3>
<p>Blockchains are built on three fundamental ideas or technologies:</p>
<ol>
<li>Cryptography</li>
<li>Peer to Peer Networking</li>
<li>Game Theory</li>
</ol>
<p>Like the Internet (a network of computers) and Computer Science in general, these are <em>relatively</em> new ideas (i.e., having been largely developed in the last few decades) (TODO: check this). </p>
<p>In blockchain, these concepts have been combined in a unique way to solve a unique problem: How do we create a cooperating network, without a central authority, where the network may be unreliable and parts of the network may be hostile towards the whole!</p>
<p>More specifically, how do we create a public, shared resources (a ledger of transactions) that is secure from hostile actors without relying on centralization or privatization.</p>
<h3 id="whiteboard-analogy">Whiteboard Analogy</h3>
<p>Imagine we are opening a bank.</p>
<p>In order to keep track of everyone's credits and debits, we're going to use a white board.</p>
<p>Because this white board represents millions or even billions of dollars, we have to ensure that no one modifies transactions they're not authorized to.</p>
<p>If everyone's transacvtions -- and therefore bank balance -- is on a whiteboard, the addition of a single "0" could make someone a whole lot richer.</p>
<h4 id="privatecentralizedmodel">Private, Centralized Model</h4>
<p>Because our ledger is so sensitive, we're doing to do the most sane thing possible: We're going to lock it in a vault and make sure only select people have access to that vault. If our vault is secure, our whiteboard is secure.</p>
<p>This works perfectly fine if everyone trusts the bank -- and trusts the bank not to raise fees to be unreasonable or to not deny banking to "undeseriable" people (where undesireable could mean someone who is against prevailing political opinions).</p>
<p>But what if we want to do the same without trusting the bank?</p>
<h4 id="publicdecentralizedmodel">Public, Decentralized Model</h4>
<p>Now, if keeping billions of dollars worth of transactions on a whiteboard in a vault wasn't crazy enough, let's put the whiteboard <em>outside, in the bank's parking lot</em>!</p>
<p>Obviously this is crazy, now anyone can erase transactions, add zeros, do anything they want to anyone's account, including their own.</p>
<p><em>But this is precisely what blockchain allows us to do.</em> Is it magic? Kind of.</p>
<p>It's a novel combination of our three fundamental ideas:</p>
<h3 id="cryptography">Cryptography</h3>
<p>Cryptography, precisely <em>Public Key Cryptography</em> is <em>already</em> the backbone of the Internet as we know it. Without Public Key Cryptography, there would be no HTTPS, no secure logins, no e-commerce, no Internet banking.</p>
<p>In short, Public Key Cryptography allows to to create a secret number (a private key) and <em>derive</em> a non-secret number (a public key) in such a way that we can encrypt a message with a public key &mdash; and that message can only be decrypted with the private key. </p>
<p>(We can encrypt with a private key and decrypt with a public key, but that's usually called 'signing' and is used to prove ownership of a private key.)</p>
<p>What's more, we can easily derive a public key from our private key, but it's computationally infeasible to derive our private key from our public key. Mathematically, it involves prime numbers and is a type of one-way or trapdoor function. </p>
<p>It works because it's simple to multiple numbers together, but on the other hand, it takes a <em>long time</em> to factor prime numbers, where <em>long time</em> can be billions of years.</p>
<p>Public Key Cryptography is used extensively in blockchain, with its most fundamental use being the derivation of keypairs for crypto wallets. A public key, in essence, becomes an address that coins can be sent to and the matching private key is the secret needed to send money <em>out of</em> that address.</p>
<h3 id="p2p">P2P</h3>
<p>Peer to Peer networking is another foundational element to blockchain, with the main idea being that individual computers participating with a blockchain (nodes) are equal: There is (usually) no central node or authority.</p>
<p>Additionally, each node generally holds a complete copy of the list of transactions that the blockchain contains. </p>
<p>This is somewhat similar to BitTorrent, where many nodes may have a complete copy of a pirated movie, each sending a piece of it to someone requesting that movie. By many nodes having a full copy of the movie, it muddies the legal waters to the point where it's infeasible to prosecute individual participants or shut them down.</p>
<p>(There are non-pirating reasons to use BitTorrent as well, such as increased download speeds, censorship resistance, etc. but we won't go any deeper.) </p>
<h3 id="game-theory">Game Theory</h3>
<p>The fundamental limitation of Peer-to-Peer networks is exactly their strength. That is, their key benefit is that they operate without a central authority.</p>
<p>That is also their biggest challenge. If we <em>don't</em> have a central authority (no whiteboard in a vault) how do we ensure the network isn't manipulated by nefarious actors?</p>
<p>If anyone can update the network, how to we prevent nodes from giving themselves huge bank balances with transactions created out of thin air?</p>
<p>This is where Game Theory comes into play. This problem is usually referred to as the Byzantine Generals Problem, which is based on a related (but simpler) problem known as the Two Generals Problem.</p>
<h3 id="two-generals-problem">Two Generals Problem</h3>
<p><img src="/static/img/two_generals.png" alt="Two Generals Problem" title="Two Generals Problem" /></p>
<p>The Two Generals Problem is a thought experiment that highlights the fact that communicating over an unreliable network makes coordinating or establishing common knowledge an unsolvable problem.</p>
<p>In other words, getting two computers to communicate over an unreliable or adversarial network (which describes any real world network) is an unsolvable problem. We simply <em>can't</em> make two computers know the same thing in an exacting way using a real world communication channel.</p>
<p>To illustrate this, we use the example of two generals that need to coordinate an attack (to happen at a precise time). If they attack at different times, they'll both fail. If they attack at the same time, they'll win.</p>
<p>To complicate things, the generals' messengers have to travel through enemy territory, which means their messages may be intercepted and never arrive.</p>
<p>When General 1 sends a messenger to General 2, General 1 won't know if that message arrived without an acknowledgement message from General 2.</p>
<p>The potential points of failure are now:</p>
<ol>
<li>The message never arrives</li>
<li>No acknowledgement comes because the message was intercepted</li>
<li>No acknowledgement comes because the <em>acknowledgement</em> was intercepted</li>
</ol>
<p>Simply sending redundant messages or extra rounds of acknowledgements won't solve the problem, since any message may be lost in transit.</p>
<p>Since there is no absolute solution, the problem then becomes one of achieving a degree of certainty. If we were to, say, send 100 messages simultaneously, the likelihood that one message and one acknowledgement make the round trip should be significantly higher than if we just send one.</p>
<p>We can never be absolutely certain, though we can achieve an acceptable degree of certainty, depending on our requirements. This probabilistic approach will become more critical as we expand this thought experiment.</p>
<h3 id="byzantine-generals-problem">Byzantine Generals Problem</h3>
<p>The Byzantine Generals Problem expands upon the Two Generals Problem to consider how a network of computers (usually more than two) may decide on the current state of the network while assuming it may have incomplete or incorrect information about the state of any individual computer.</p>
<p>In the case of a blockchain network, we usually add that one or more individual computers may be purposefully giving false information.</p>
<p>If a system cannot adequately recover from this uncertainty, it is said to be in <em>Byzantine fault</em>. If it can, it is said to be <em>Byzantine fault tolerant</em>.</p>
<p>In the general sense, a Byzantine fault is framed as a system failure resulting from a network state where parts of a network may be in a failure state <em>while appearing to be operating correctly</em>. That is, not only may the state of the network may be inconsistent, but knowledge of that inconsistency may be uncertain.</p>
<p>In order to deal with this uncertainly, a network has to have a predefined set of rules for reaching <em>consensus</em> of the state of the network and its individual components.</p>
<p>In this new thought experiment, the number of generals deciding on a plan of attack increases from two to many (let's say 11) and the decision expands from coordinating an attack to coordinating either an attack or retreat. </p>
<p>Again, if the general do not act in concert, they will all be destroyed. To complicate things even further, some generals may be traitors!</p>
<p>To maximize chaos, bad generals can vote selectively, e.g., if the vote is split 5 and 5, they can send an 'attack' vote to the attacking generals and a 'retreat' vote to the retreating generals, thereby making both sides believe they have a majority vote.</p>
<div class="aside">
<p><strong>Hostile networks</strong></p>
<p>It's worth noting that BFT was first formulated when the networks in question were likely to conspire against themselves through errors alone. That is, there weren't really hostile actors, but de factor conspiracies to take down the network may arise due to multiple failures within that network.</p>

<p>An example of a conspiring network could be a vehicle control system with faulty sensors.</p>
</div>
<h4 id="solutions">Solutions</h4>
<p>Solutions are complex and depend entirely on the problem at hand, but in general we find similarities along the lines of:</p>
<ol>
<li>Requiring some form of majority (e.g., 2/3 of all nodes must agree)</li>
<li>Using cryptography to make messages unforgable</li>
<li>Using statistical approaches (e.g., sending messages more than once)</li>
</ol>
<p>In the blockchain space, we find a number solutions, starting with Bitcoin's PoW.</p>
<h4 id="bftalgosinblockchain">BFT algos in blockchain</h4>
<p>While we won't go into Proof of Work in depth here, the anonymous creator of Bitcoin, Satoshi Nakamoto, was the first to formulate a Byzatine Fault tolerant protocol in the context of "digital money", that is, how could we build a decentralized network that could securely represent transactions that couldn't be tampered with or forged?</p>
<p>In this case, an economic disincentive was introduced (a feature all blockchain protocols share [TODO: Check this]) that made it infeasible, or too expensive, to attack the network.</p>
<p>By requiring large amounts of computing power to participate in the network, it made attacks too expensive or impractical to execute.</p>
<div class="aside">
<p><strong>51% attacks</strong></p>
<p>While it may be the case that acquiring 51% of the computing, or hashing, power of the Bitcoin network may be impractical, these so-called 51% percent attacks have been successfully used on other, smaller, blockchains.</p>
</div>
<p>The largest downside to Proof of Work systems is the large amount of computing power that is <em>wasted</em> by design, by the participants. That waste manifests in hardware CAPEX, hardware depreciation and electricity and storage costs.</p>
<p>Bitcoin mining operations cost a lot, take up a lot of space and waste a lot of electricity.</p>
<h4 id="consensusprotocolintezos">Consensus Protocol in Tezos</h4>
<p>Tezos, having been conceived of after Bitcoin, chose another BFT protocol &mdash; Proof of Stake. Proof of Stake has a similar economic disincentive that makes it too expensive or impractical to attack the network, but it does not share Proof of Work's extreme inefficiency.</p>
<p>There are other benefits to Tezos' particular style of Proof of Stake, which we'll get into in following chapters.</p>
<h3 id="consensus-protocols-in-general">Consensus Protocols in General</h3>
<p>It's worth pointing out blockchain protocols can vary widely in their operation, but they must share the following characteristics:</p>
<ol>
<li>Provide a single version of truth without a central authority</li>
<li>De-incentivize bad actors, making attacks impractical</li>
<li>Incentivize participation of good actors</li>
</ol>
<p><a href="https://www.mail-archive.com/cryptography@metzdowd.com/msg09997.html">Satoshi's original email about BFT and PoW</a></p>
<div class="navigation">
  <ul>
    <li style="text-align: left">
      
        <a id="prevlink" href="/introduction-what-is-tezos.html">Introduction: What is Tezos?</a>
      
    </li>
    <li style="text-align: center">
      <a href="/toc.html">Table of Contents</a>
    </li>
    <li style="text-align: right">
      
        <a id="nextlink" href="/blockchain-201.html">Blockchain 201</a>
      
    </li>
  </ul>
</div>

      <div id="footer">
        <hr>
        <p class="license">This work is licensed under the Creative Commons license <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA 3.0</a></p>
        
          <p class="timestamp">Page last updated Tuesday, May 14, 2019</p>
        
      </div>
    </div><!-- #content -->
  </div><!-- #background -->
  <script src="/static/js/scripts.js"></script>
</body>
</html>
